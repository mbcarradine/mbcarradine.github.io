<!DOCTYPE html>
<html>
    <head>
        <script src="https://d3js.org/d3.v4.min.js"></script>
    </head>
    <style type="text/css">
        svg {
            font-family: sans-serif;
        }
    </style>
    <body>
        <script>
            d3.tsv("data/LaborInNonAgricultSector.tsv", function(error, data) {
              if (error) throw error;
            
                var mapX = d3.scaleLinear()
                    .domain([0, 24])
                    .range([0, 400]);
                
                var mapY = d3.scaleLinear()
                    .domain([2, 60])
                    .range([300, 0]);
                
                d3.select('body')
                    .selectAll('svg') // empty selection
                    .data(data)  // bind data
                    .enter()  // sticky data
                    .append('svg')
                        .attr('width', 400)
                        .attr('height', 300)
                        .each(function(d) {
                            d3.select(this)
                                .append('rect')
                                .attr('x', 0)
                                .attr('y', 0)
                                .attr('width', 400)
                                .attr('height', 300)
                                .attr('fill', 'white')
                                .attr('stroke', 'black');
                                    
                            yrValues = [];
                            for(var column in d){
                                if(parseInt(column)){
                                    console.log(column);
                                    yrValues.push(d[column].length ? parseInt(d[column]) : 0);   
                                }
                            }
                            d3.select(this)
                              .selectAll("circle")
                              .data(yrValues)
                              .enter()
                              .append("circle")
                              .attr('r', 5)
                              .attr('cx', function(val,i) { return mapX(i); })
                              .attr('cy', function(val) { return mapY(val); })
                        })
            });
        </script>
    </body>
</html>