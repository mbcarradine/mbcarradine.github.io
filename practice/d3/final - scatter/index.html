<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
	<title>Scatterplot with Voronoi</title>

	<!-- D3.js -->	
 <script src="https://d3js.org/d3.v4.min.js"></script>

	<!-- bootstrap-native -->
	<!-- use custom build to handle tooltip removal cleanly -->
	<script type="text/javascript" src="https://cdn.rawgit.com/micahstubbs/bootstrap.native/improve-popover-remove/dist/bootstrap-native.js"></script>
	
	<!-- lodash -->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.15.0/lodash.js'></script>

	<!-- babel standalone -->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.10.3/babel.min.js'></script>
	
	<!-- d3-voronoi-scatterplot chart component -->
	<script src='d3-voronoi-scatterplot.js'></script>
	<script src='worldbank.js'></script>

	<!-- Open Sans & CSS -->
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
	<link href='//fonts.googleapis.com/css?family=Open+Sans:700,400,300' rel='stylesheet' type='text/css'>
	<link rel="icon" href="data:;base64,iVBORw0KGgo=">
	  <style>
		body {
		  font-family: 'Open Sans', sans-serif;
		  font-size: 12px;
		  font-weight: 400;
		  color: #000000;
		  text-align: center;
		}

		html, body { 
			width:auto; 
			height:auto; 
		}
		
		.axis path,
		.axis line {
			fill: none;
			stroke: #B3B3B3;
			shape-rendering: crispEdges;
		}
		.axis text {
			font-size: 11px;
			fill: #6B6B6B;
		}

		.countries {
			pointer-events: none;
		}

		.guide {
			pointer-events: none;
			font-size: 14px;
			font-weight: 600;
		}
		
		.popover {
			pointer-events: none;
		}
		
		.legendCircle {
			stroke-width:1;
			stroke:#999;
			stroke-dasharray:2 2;
			fill:none;
		}

		.legendLine {
			stroke-width: 1;
			stroke: #D1D1D1;
			shape-rendering: crispEdges;
		}

		.legendTitle {
			fill: #1A1A1A;
			color: #1A1A1A;
			text-anchor: middle;
			font-size: 10px;
		}

		.legendText {
			fill: #949494;
			text-anchor: start;
			font-size: 10px;
		}
		
		@media (min-width: 500px) {
		  .col-sm-3, .col-sm-9 {
			float: left;
		  }
		  .col-sm-9 {
			width: 75%;
		  }
		  .col-sm-3 {
			width: 25%;
		  }
		}
	  </style>
  </head>
  <body>
	<div id="cont" class="container-fluid text-center">
		<div class="row scatter">
			<h5 style="color: #3B3B3B;">Comparing NYC neighborhoods: number of seniors without AC and cooling centers</h5>
			<h6 style="color: #A6A6A6;">Which neighborhoods are underserved?</h6>
			<div class="col-sm-9">
				<div id="chart"></div>
			</div>
			<div id = "legend" class="col-sm-3" style="padding-right: 0px; padding-left: 0px;">
				<div class="legendTitle" style="font-size: 12px;"></div>
				<div id="legend"></div>
			</div>
		</div>
	</div>
<script lang='babel' type='text/babel'>
const xVariable = 'Seniors Without AC';
const yVariable = 'Cooling Centers';
const rVariable = 'GDP';

const tooltipColumns = [
  {
    name: 'UHF 34 Neighborhood',
    valueOnly: true
  }/*,
  {
    name: 'GDP',
    type: 'numeric',
    format: ',.0f'
  },
  {
    name: 'Cooling Centers',
    type: 'numeric',
    format: ',.0f'
  },
  {
    name: 'Seniors Without AC',
    type: 'numeric',
    format: ',.0f'
  } */
];

const numericColumns = [
	'GDP',
	'Seniors Without AC',
	'Cooling Centers'
];

const marks = {
	r: 6,
	fillOpacity: 0.8,
	colors: [
 	  '#1f78b4',
 	  '#ff7f00',
 	  '#33a02c',
 	  '#e31a1c',
 	  '#6a3d9a',
 	  '#b15928',
 	  '#a6cee3',
 	  '#fdbf6f',
 	  '#b2df8a',
 	  '#fb9a99',
 	  '#cab2d6',
 	  '#ffff99'
 	]
};

const categoricalColumns = [
	'UHF 34 Neighborhood',
	'UHF 34 NeighborhoodCode',
	'Region',
	'Continent'
];

const options = {
  xVariable,
  yVariable,
  rVariable,
  marks,
  tooltipColumns,
  numericColumns,
 	categoricalColumns,
 	width: 960,
  yScaleType: 'power',
  yScaleExponent: 3,
  idVariable: 'UHF 34 NeighborhoodCode',
  groupByVariable: 'Continent',
  xLabelDetail: 'UHF 34 Neighborhood',
  wrapperId: 'Seniors Without ACVsCooling Centers',
  wrapperLabel: 'example 02',
  xDroplineTextFormat: ',.0f',
  yDroplineTextFormat: '.0f'
}

console.log('d3VoronoiScatterplot', d3VoronoiScatterplot);
const update = d3VoronoiScatterplot.drawVoronoiScatterplot('#chart', data, options);
// console.log('update', update);
// console.log('d3VoronoiScatterplot', d3VoronoiScatterplot);
</script>
  </body>
</html>